# Project Structure - Agent Vocal Prof

```
intelligence_lab_agent_vocal/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                    # Main documentation (architecture, features, setup)
â”œâ”€â”€ ğŸ“„ LICENSE                      # MIT License
â”œâ”€â”€ ğŸ“„ CHANGELOG.md                 # Version history
â”œâ”€â”€ ğŸ“„ CONTRIBUTING.md              # Contribution guidelines
â”œâ”€â”€ ğŸ“„ QUICKSTART.md                # 15-minute setup guide
â”œâ”€â”€ ğŸ“„ PROJECT_SUMMARY.md           # Complete project summary
â”œâ”€â”€ ğŸ“„ requirements.txt             # Python dependencies (pinned)
â”œâ”€â”€ ğŸ“„ .gitignore                   # Git ignore rules
â”‚
â”œâ”€â”€ ğŸ“ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml                  # GitHub Actions CI/CD pipeline
â”‚
â”œâ”€â”€ ğŸ“ config/
â”‚   â””â”€â”€ config.yaml                 # Complete system configuration
â”‚       â”œâ”€â”€ ASR settings (model, VAD thresholds)
â”‚       â”œâ”€â”€ RAG settings (embeddings, chunk size, top-k)
â”‚       â”œâ”€â”€ LLM settings (models per subject, n_ctx, temp)
â”‚       â”œâ”€â”€ TTS settings (voices, speed)
â”‚       â”œâ”€â”€ Router settings (keywords, TF-IDF)
â”‚       â”œâ”€â”€ Orchestrator settings (timeouts, retries)
â”‚       â””â”€â”€ UI settings (server, port, share)
â”‚
â”œâ”€â”€ ğŸ“ src/                         # Core source code
â”‚   â”œâ”€â”€ __init__.py                 # Package initialization
â”‚   â”œâ”€â”€ config.py                   # Config management (300 lines)
â”‚   â”œâ”€â”€ utils.py                    # Utilities (logging, chunking, etc.)
â”‚   â”œâ”€â”€ asr.py                      # Faster-Whisper + Silero VAD
â”‚   â”œâ”€â”€ rag_build.py                # Document ingestion â†’ FAISS indexes
â”‚   â”œâ”€â”€ rag.py                      # FAISS retrieval with metadata
â”‚   â”œâ”€â”€ router.py                   # Subject detection (keywords + TF-IDF)
â”‚   â”œâ”€â”€ llm.py                      # llama-cpp wrapper + hint generation
â”‚   â”œâ”€â”€ tts.py                      # Piper-TTS (FR/EN)
â”‚   â”œâ”€â”€ orchestrator.py             # Complete pipeline orchestration
â”‚   â””â”€â”€ ui_gradio.py                # Gradio web interface
â”‚
â”œâ”€â”€ ğŸ“ tests/                       # Unit tests
â”‚   â”œâ”€â”€ test_rag.py                 # RAG build & retrieval tests
â”‚   â”œâ”€â”€ test_llm.py                 # LLM & hint generation tests
â”‚   â”œâ”€â”€ test_asr.py                 # ASR & VAD tests
â”‚   â”œâ”€â”€ test_tts.py                 # TTS & language detection tests
â”‚   â”œâ”€â”€ test_router.py              # Subject routing tests
â”‚   â””â”€â”€ test_orch.py                # Orchestrator tests
â”‚
â”œâ”€â”€ ğŸ“ notebooks/                   # Jupyter notebooks
â”‚   â”œâ”€â”€ 00_setup_colab.ipynb        # Colab setup + smoke tests
â”‚   â”‚   â”œâ”€â”€ Install dependencies
â”‚   â”‚   â”œâ”€â”€ Check GPU
â”‚   â”‚   â”œâ”€â”€ Download models
â”‚   â”‚   â”œâ”€â”€ Run smoke tests
â”‚   â”‚   â”œâ”€â”€ Build indexes
â”‚   â”‚   â””â”€â”€ Launch UI
â”‚   â”‚
â”‚   â””â”€â”€ 10_demo_pipeline.ipynb      # End-to-end pipeline demos
â”‚       â”œâ”€â”€ ASR demo
â”‚       â”œâ”€â”€ Router demo
â”‚       â”œâ”€â”€ RAG demo
â”‚       â”œâ”€â”€ LLM demo
â”‚       â”œâ”€â”€ TTS demo
â”‚       â”œâ”€â”€ Complete pipeline
â”‚       â”œâ”€â”€ Performance benchmarks
â”‚       â””â”€â”€ Error handling tests
â”‚
â”œâ”€â”€ ğŸ“ scripts/                     # Automation scripts
â”‚   â”œâ”€â”€ build_indexes.sh            # Build FAISS indexes (executable)
â”‚   â””â”€â”€ run_gradio.sh               # Launch Gradio UI (executable)
â”‚
â”œâ”€â”€ ğŸ“ data/                        # Knowledge base documents
â”‚   â”œâ”€â”€ maths/                      # Math documents
â”‚   â”‚   â”œâ”€â”€ equations_second_degre.txt  # Quadratic equations
â”‚   â”‚   â””â”€â”€ index.faiss             # (generated by build script)
â”‚   â”‚
â”‚   â”œâ”€â”€ physique/                   # Physics documents
â”‚   â”‚   â”œâ”€â”€ mecanique_newton.txt    # Newton's laws, energy
â”‚   â”‚   â””â”€â”€ index.faiss             # (generated)
â”‚   â”‚
â”‚   â””â”€â”€ anglais/                    # English documents
â”‚       â”œâ”€â”€ grammar_tenses.txt      # English verb tenses
â”‚       â””â”€â”€ index.faiss             # (generated)
â”‚
â”œâ”€â”€ ğŸ“ models/                      # Model files (NOT in git)
â”‚   â”œâ”€â”€ README.md                   # Model download instructions
â”‚   â”‚
â”‚   â”œâ”€â”€ llm/                        # Language models (.gguf)
â”‚   â”‚   â”œâ”€â”€ .gitkeep
â”‚   â”‚   â””â”€â”€ (Download: Phi-3, Qwen2, etc.)
â”‚   â”‚
â”‚   â””â”€â”€ voices/                     # TTS voice models (.onnx)
â”‚       â”œâ”€â”€ .gitkeep
â”‚       â””â”€â”€ (Download: Piper FR/EN voices)
â”‚
â””â”€â”€ ğŸ“ logs/                        # Application logs (generated)
    â””â”€â”€ (created at runtime)

```

## File Count Summary

| Category | Count | Description |
|----------|-------|-------------|
| **Python Modules** | 11 | Core functionality |
| **Test Modules** | 6 | Unit tests |
| **Notebooks** | 2 | Tutorials & demos |
| **Config Files** | 1 | YAML configuration |
| **Documentation** | 6 | MD files (README, guides, etc.) |
| **Scripts** | 2 | Bash automation |
| **Sample Data** | 3 | TXT documents |
| **CI/CD** | 1 | GitHub Actions workflow |
| **TOTAL** | 32 | Source files |

## Lines of Code

| Type | Lines | % |
|------|-------|---|
| Python (src/) | ~2,500 | 43% |
| Tests | ~520 | 9% |
| Notebooks | ~400 | 7% |
| Markdown | ~1,500 | 26% |
| Config/Data | ~850 | 15% |
| **TOTAL** | **~5,770** | **100%** |

## Key Directories

### `/src` - Core Modules
- **config.py**: Configuration management with typed dataclasses
- **utils.py**: Logging, file I/O, text chunking, progress tracking
- **asr.py**: Speech recognition with VAD
- **rag_build.py**: Offline index building from PDFs/TXT
- **rag.py**: Online retrieval from FAISS
- **router.py**: Intelligent subject routing
- **llm.py**: Local LLM with pedagogical prompts
- **tts.py**: Text-to-speech synthesis
- **orchestrator.py**: Pipeline coordination
- **ui_gradio.py**: Web interface

### `/tests` - Unit Tests
- Full coverage of core functionality
- Mock-free testing where possible
- Isolated component tests
- Integration test in `test_orch.py`

### `/notebooks` - Interactive Tutorials
- **00_setup_colab.ipynb**: Complete Colab onboarding
- **10_demo_pipeline.ipynb**: Component demonstrations

### `/data` - Knowledge Base
- Organized by subject (maths, physique, anglais)
- Sample documents included
- FAISS indexes generated by build script

### `/models` - AI Models
- Not tracked in git (.gitignore)
- Download instructions in README.md
- Supports multiple model families

### `/scripts` - Automation
- **build_indexes.sh**: One-command index building
- **run_gradio.sh**: One-command UI launch

## Configuration Flow

```
config/config.yaml
        â†“
    config.py (loads & validates)
        â†“
    get_config() (singleton)
        â†“
    All modules access via self.config
```

## Data Flow

```
1. User Input (text/audio)
        â†“
2. ui_gradio.py (Gradio interface)
        â†“
3. orchestrator.py (coordinates pipeline)
        â†“
4. Components (ASR, Router, RAG, LLM, TTS)
        â†“
5. Events streamed back to UI
        â†“
6. Display (transcript, hints, sources, audio)
```

## Module Dependencies

```
ui_gradio.py
    â””â”€â”€ orchestrator.py
            â”œâ”€â”€ asr.py
            â”‚   â””â”€â”€ config.py
            â”œâ”€â”€ rag.py
            â”‚   â”œâ”€â”€ config.py
            â”‚   â””â”€â”€ rag_build.py (offline)
            â”œâ”€â”€ router.py
            â”‚   â””â”€â”€ config.py
            â”œâ”€â”€ llm.py
            â”‚   â””â”€â”€ config.py
            â””â”€â”€ tts.py
                â””â”€â”€ config.py

utils.py (used by all)
config.py (singleton, used by all)
```

## Git Tracking

**Tracked:**
- âœ… Source code (.py)
- âœ… Tests
- âœ… Notebooks (.ipynb)
- âœ… Configuration (.yaml)
- âœ… Documentation (.md)
- âœ… Scripts (.sh)
- âœ… Sample data (small .txt)

**Not Tracked:**
- âŒ Models (.gguf, .onnx) - too large
- âŒ Indexes (.faiss, .pkl) - generated
- âŒ Logs (.log)
- âŒ Cache (.cache/)
- âŒ Virtual env (venv/)
- âŒ Python cache (__pycache__, *.pyc)

## Entry Points

| Command | Entry Point | Purpose |
|---------|-------------|---------|
| `python -m src.ui_gradio` | `ui_gradio.py:main()` | Launch web UI |
| `python -m src.rag_build` | `rag_build.py:main()` | Build indexes |
| `bash scripts/run_gradio.sh` | Wrapper | Launch with checks |
| `bash scripts/build_indexes.sh` | Wrapper | Build with logging |
| `pytest tests/` | pytest | Run all tests |

## Installation Artifacts

**After setup:**
```
intelligence_lab_agent_vocal/
â”œâ”€â”€ venv/                   # Virtual environment
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ llm/*.gguf          # Downloaded models
â”‚   â””â”€â”€ voices/*.onnx       # Downloaded voices
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ maths/index.faiss   # Generated index
â”‚   â”œâ”€â”€ physique/index.faiss
â”‚   â””â”€â”€ anglais/index.faiss
â””â”€â”€ logs/
    â””â”€â”€ *.log               # Runtime logs
```

## Runtime Generated Files

During execution:
- `logs/*.log` - Application logs
- `data/*/index.faiss` - FAISS indexes
- `data/*/index.pkl` - Metadata pickles
- `.cache/` - Model cache

---

**Total Project Size:**
- Source: ~500 KB
- With models: ~6-7 GB
- Minimal setup: ~3-4 GB

**Estimated Setup Time:** 10-15 minutes
